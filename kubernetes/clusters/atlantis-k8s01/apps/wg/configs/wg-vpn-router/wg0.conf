[Interface]
Address = {{ .tunnel_address_v4 }}/32, {{ .tunnel_address_v6 }}/128
PrivateKey = {{ .private_key }}
# Default route through tunnel for forwarded traffic
PostUp = ip route add default dev wg0 table 100
PostUp = ip -6 route add default dev wg0 table 100
# Policy routing: traffic from VLAN 200 (10.66.2.0/24) uses table 100
PostUp = ip rule add from 10.66.2.0/24 table 100 priority 100
PostUp = ip -6 rule add from fd66::2:0/112 table 100 priority 100
# Route to WG network
PostUp = ip route add 10.66.0.0/24 dev wg0
PostUp = ip -6 route add fd66::0:0/112 dev wg0
# Cleanup
PostDown = ip route del default dev wg0 table 100 || true
PostDown = ip -6 route del default dev wg0 table 100 || true
PostDown = ip rule del from 10.66.2.0/24 table 100 priority 100 || true
PostDown = ip -6 rule del from fd66::2:0/112 table 100 priority 100 || true
PostDown = ip route del 10.66.0.0/24 dev wg0 || true
PostDown = ip -6 route del fd66::0:0/112 dev wg0 || true

[Peer]
PublicKey = {{ .peer_tortuga_pubkey }}
PresharedKey = {{ .peer_tortuga_psk }}
Endpoint = {{ .peer_tortuga_endpoint }}
AllowedIPs = 0.0.0.0/0, ::/0
PersistentKeepalive = 25
