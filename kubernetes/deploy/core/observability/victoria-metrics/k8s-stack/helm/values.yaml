---
fullnameOverride: "vm"

# -- VictoriaMetrics Operator dependency chart configuration. More values can be found [here](https://docs.victoriametrics.com/helm/victoriametrics-operator#parameters). Also checkout [here](https://docs.victoriametrics.com/operator/vars) possible ENV variables to configure operator behaviour
victoria-metrics-operator:
  enabled: true
  crds:
    enabled: false
  # serviceMonitor:
  #   enabled: true
  operator:
    # -- Enables ownership reference for converted prometheus-operator objects,
    # it will remove corresponding victoria-metrics objects in case of deletion prometheus one.
    enable_converter_ownership: true
    # -- Enables custom config-reloader, bundled with operator.
    # It should reduce  vmagent and vmauth config sync-time and make it predictable.
    useCustomConfigReloader: true

# deploy a single node victoria metrics instance
vmsingle:
  enabled: true
  # -- Full spec for VMSingle CRD. Allowed values describe [here](https://docs.victoriametrics.com/operator/api#vmsinglespec)
  spec:
    retentionPeriod: "120d"
    storage:
      accessModes:
        - ReadWriteOnce
      resources:
        requests:
          storage: 40Gi
  ingress:
    enabled: true
    ingressClassName: tailscale
    hosts:
      - vm-${CLUSTER_NAME}
    tls:
      - hosts:
          - vm-${CLUSTER_NAME}

vmcluster:
  enabled: false

alertmanager:
  enabled: true
  spec:
    externalURL: "https://alertmgr-${CLUSTER_NAME}.hummingbird-perch.ts.net"

  # -- (object) Alertmanager ingress configuration
  ingress:
    enabled: true
    ingressClassName: tailscale
    hosts:
      - alertmgr-${CLUSTER_NAME}
    tls:
      - hosts:
          - alertmgr-${CLUSTER_NAME}

# -- Grafana dependency chart configuration. For possible values refer [here](https://github.com/grafana/helm-charts/tree/main/charts/grafana#configuration)
grafana:
  enabled: true
  plugins:
    - victoriametrics-metrics-datasource
  ingress:
    enabled: true
    ingressClassName: tailscale
    hosts:
      - grafana-${CLUSTER_NAME}
    tls:
      - hosts:
          - grafana-${CLUSTER_NAME}

kubeEtcd:
  enabled: false

kubeScheduler:
  # -- Enable KubeScheduler metrics scraping
  enabled: true

kubeProxy:
  enabled: false
